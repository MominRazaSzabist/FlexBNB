# FlexBnB Reservation System - Visual Flow Diagram

## ğŸ¯ Complete End-to-End Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         GUEST BOOKING FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. GUEST BROWSES PROPERTIES
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Main Page       â”‚
   â”‚  /               â”‚
   â”‚                  â”‚
   â”‚  â€¢ Property List â”‚
   â”‚  â€¢ Search/Filter â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ Clicks Property
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Property Detail  â”‚
   â”‚ /Properties/[id] â”‚
   â”‚                  â”‚
   â”‚  â€¢ Images        â”‚
   â”‚  â€¢ Description   â”‚
   â”‚  â€¢ Amenities     â”‚
   â”‚  â€¢ Reviews       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼

2. GUEST SELECTS DATES & CLICKS RESERVE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ReservationSideBar Component    â”‚
   â”‚                                  â”‚
   â”‚  ğŸ“… Check-in: 02/15/2024        â”‚
   â”‚  ğŸ“… Check-out: 02/18/2024       â”‚
   â”‚  ğŸ‘¥ Guests: 2                   â”‚
   â”‚  ğŸ’° Total: $450                 â”‚
   â”‚                                  â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
   â”‚  â”‚  [Reserve Button]  â”‚ â—„â”€â”€â”€â”€â”€â”€ Guest Clicks
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

3. PAYMENT MODAL OPENS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚     PaymentModal Component       â”‚
   â”‚                                  â”‚
   â”‚  ğŸ’³ Card Number: ****           â”‚
   â”‚  ğŸ“… Expiry: MM/YY               â”‚
   â”‚  ğŸ”’ CVV: ***                    â”‚
   â”‚                                  â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
   â”‚  â”‚ [Confirm Payment]  â”‚         â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

4. CONFIRMATION MODAL
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ConfirmationModal Component     â”‚
   â”‚                                  â”‚
   â”‚  âœ“ Property: Sample Hotel       â”‚
   â”‚  âœ“ Dates: 02/15 - 02/18         â”‚
   â”‚  âœ“ Total: $450                  â”‚
   â”‚  âœ“ Card: **** 1234              â”‚
   â”‚                                  â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
   â”‚  â”‚ [Confirm Booking]  â”‚         â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

5. API CALL TO BACKEND
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  POST /api/booking/reservations/create/                  â”‚
   â”‚                                                           â”‚
   â”‚  Headers:                                                â”‚
   â”‚    Authorization: Bearer <clerk-jwt-token>               â”‚
   â”‚    Content-Type: application/json                        â”‚
   â”‚                                                           â”‚
   â”‚  Body:                                                   â”‚
   â”‚  {                                                       â”‚
   â”‚    "propertyId": "uuid",                                â”‚
   â”‚    "startDate": "2024-02-15",                           â”‚
   â”‚    "endDate": "2024-02-18",                             â”‚
   â”‚    "guestsCount": 2,                                    â”‚
   â”‚    "useHourlyBooking": false                            â”‚
   â”‚  }                                                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

6. BACKEND PROCESSING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Django Backend - views.create_reservation()             â”‚
   â”‚                                                           â”‚
   â”‚  1. Authenticate user (Clerk JWT)                        â”‚
   â”‚  2. Validate property exists                             â”‚
   â”‚  3. Calculate pricing:                                   â”‚
   â”‚     â€¢ Total Price = $150 Ã— 3 nights = $450              â”‚
   â”‚     â€¢ Platform Fee = $450 Ã— 10% = $45                   â”‚
   â”‚     â€¢ Host Earnings = $450 - $45 = $405                 â”‚
   â”‚  4. Create Reservation record:                           â”‚
   â”‚     â€¢ Status: 'pending'                                  â”‚
   â”‚     â€¢ Guest: current user                                â”‚
   â”‚     â€¢ Host: property owner                               â”‚
   â”‚  5. Save to database                                     â”‚
   â”‚  6. Return reservation data                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

7. SUCCESS RESPONSE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Response (201 Created):                                 â”‚
   â”‚  {                                                       â”‚
   â”‚    "id": "reservation-uuid-123",                        â”‚
   â”‚    "property": {                                        â”‚
   â”‚      "id": "property-uuid",                             â”‚
   â”‚      "title": "Sample Hotel"                            â”‚
   â”‚    },                                                   â”‚
   â”‚    "guest": {                                           â”‚
   â”‚      "id": "guest-uuid",                                â”‚
   â”‚      "name": "John Doe",                                â”‚
   â”‚      "email": "john@example.com"                        â”‚
   â”‚    },                                                   â”‚
   â”‚    "host": {                                            â”‚
   â”‚      "id": "host-uuid",                                 â”‚
   â”‚      "name": "Ali Hassan"                               â”‚
   â”‚    },                                                   â”‚
   â”‚    "check_in_date": "2024-02-15",                       â”‚
   â”‚    "check_out_date": "2024-02-18",                      â”‚
   â”‚    "guests_count": 2,                                   â”‚
   â”‚    "total_price": 450.00,                               â”‚
   â”‚    "booking_fee": 45.00,                                â”‚
   â”‚    "host_earnings": 405.00,                             â”‚
   â”‚    "status": "pending",                                 â”‚
   â”‚    "created_at": "2024-02-10T10:30:00Z"                 â”‚
   â”‚  }                                                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

8. FRONTEND SUCCESS HANDLING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ReservationSideBar - handleConfirmReservation()         â”‚
   â”‚                                                           â”‚
   â”‚  1. âœ… Show success notification                         â”‚
   â”‚     "Reservation confirmed! ID: reservation-uuid-123"    â”‚
   â”‚                                                           â”‚
   â”‚  2. ğŸ“¢ Dispatch custom event                             â”‚
   â”‚     window.dispatchEvent(                                â”‚
   â”‚       new CustomEvent('reservationCreated', {            â”‚
   â”‚         detail: {                                        â”‚
   â”‚           reservationId: "reservation-uuid-123",         â”‚
   â”‚           propertyId: "property-uuid",                   â”‚
   â”‚           guestId: "guest-uuid"                          â”‚
   â”‚         }                                                â”‚
   â”‚       })                                                 â”‚
   â”‚     )                                                    â”‚
   â”‚                                                           â”‚
   â”‚  3. ğŸ”„ Reset form                                        â”‚
   â”‚     â€¢ Clear dates                                        â”‚
   â”‚     â€¢ Reset times                                        â”‚
   â”‚     â€¢ Close modals                                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        HOST DASHBOARD FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

9. HOST DASHBOARD RECEIVES EVENT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  /Host/Dashboard - Event Listener                        â”‚
   â”‚                                                           â”‚
   â”‚  useEffect(() => {                                       â”‚
   â”‚    const handleNewReservation = () => {                  â”‚
   â”‚      fetchDashboardData(); // â—„â”€â”€ Triggered!            â”‚
   â”‚      toast.success('New reservation received!');         â”‚
   â”‚    };                                                    â”‚
   â”‚                                                           â”‚
   â”‚    window.addEventListener(                              â”‚
   â”‚      'reservationCreated',                               â”‚
   â”‚      handleNewReservation                                â”‚
   â”‚    );                                                    â”‚
   â”‚  }, []);                                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

10. DASHBOARD REFRESHES DATA
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  API Calls (Automatic):                                  â”‚
   â”‚                                                           â”‚
   â”‚  1. GET /api/booking/dashboard/stats/                    â”‚
   â”‚     â†’ Total Reservations: 4 (was 3)                      â”‚
   â”‚     â†’ Pending Requests: 2 (was 1)                        â”‚
   â”‚     â†’ This Month Earnings: $1,215                        â”‚
   â”‚                                                           â”‚
   â”‚  2. GET /api/booking/reservations/                       â”‚
   â”‚     â†’ All reservations (including new one)               â”‚
   â”‚                                                           â”‚
   â”‚  3. GET /api/booking/reservations/?status=pending        â”‚
   â”‚     â†’ Pending reservations (including new one)           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

11. DASHBOARD DISPLAYS NEW RESERVATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Host Dashboard - Updated View                           â”‚
   â”‚                                                           â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  â”‚  ğŸ“Š Statistics Cards                            â”‚    â”‚
   â”‚  â”‚                                                  â”‚    â”‚
   â”‚  â”‚  Total Reservations: 4  â†‘ (was 3)              â”‚    â”‚
   â”‚  â”‚  Pending Requests: 2    â†‘ (was 1)              â”‚    â”‚
   â”‚  â”‚  This Month: $1,215                             â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â”‚                                                           â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  â”‚  ğŸ”” Toast Notification                          â”‚    â”‚
   â”‚  â”‚  "New reservation received!"                     â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â”‚                                                           â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  â”‚  ğŸ“‹ Pending Booking Requests                    â”‚    â”‚
   â”‚  â”‚                                                  â”‚    â”‚
   â”‚  â”‚  NEW â†’ Sample Hotel                             â”‚    â”‚
   â”‚  â”‚        Guest: John Doe (john@example.com)       â”‚    â”‚
   â”‚  â”‚        Check-in: 02/15/2024                     â”‚    â”‚
   â”‚  â”‚        Check-out: 02/18/2024                    â”‚    â”‚
   â”‚  â”‚        Amount: $450                             â”‚    â”‚
   â”‚  â”‚        Status: ğŸŸ¡ Pending                       â”‚    â”‚
   â”‚  â”‚        [Approve] [Decline]                      â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

12. HOST APPROVES RESERVATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Host clicks [Approve] button                            â”‚
   â”‚                                                           â”‚
   â”‚  POST /api/booking/reservations/{id}/status/             â”‚
   â”‚  {                                                       â”‚
   â”‚    "status": "approved"                                  â”‚
   â”‚  }                                                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

13. BACKEND PROCESSES APPROVAL
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Django Backend - update_reservation_status()            â”‚
   â”‚                                                           â”‚
   â”‚  1. Update reservation status to 'approved'              â”‚
   â”‚  2. Create HostEarnings record:                          â”‚
   â”‚     {                                                    â”‚
   â”‚       "host": host-uuid,                                â”‚
   â”‚       "reservation": reservation-uuid,                   â”‚
   â”‚       "gross_earnings": 450.00,                         â”‚
   â”‚       "platform_fee": 45.00,                            â”‚
   â”‚       "net_earnings": 405.00,                           â”‚
   â”‚       "payout_status": "pending"                        â”‚
   â”‚     }                                                    â”‚
   â”‚  3. Return updated reservation                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

14. DASHBOARD UPDATES
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Host Dashboard - After Approval                         â”‚
   â”‚                                                           â”‚
   â”‚  âœ… Reservation status: Approved                         â”‚
   â”‚  âœ… Moved from "Pending" to "Recent Reservations"       â”‚
   â”‚  âœ… Earnings record created                              â”‚
   â”‚  âœ… Statistics updated                                   â”‚
   â”‚  âœ… Toast: "Reservation approved successfully!"          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESERVATIONS PAGE VIEW                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

15. HOST VIEWS ALL RESERVATIONS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  /Host/Reservations                                      â”‚
   â”‚                                                           â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  â”‚  Filters:                                        â”‚    â”‚
   â”‚  â”‚  [All] [Pending] [Approved] [Completed]         â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â”‚                                                           â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  â”‚  Reservations Table                              â”‚    â”‚
   â”‚  â”‚                                                  â”‚    â”‚
   â”‚  â”‚  Property    Guest       Check-in   Amount  Statusâ”‚    â”‚
   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
   â”‚  â”‚  Sample Hotel John Doe  02/15/2024  $450  âœ… Approvedâ”‚
   â”‚  â”‚  Cozy Studio  Jane Smith 02/20/2024 $280  ğŸŸ¡ Pendingâ”‚
   â”‚  â”‚  Modern Apt   Bob Johnson 01/25/2024 $675 âœ“ Completedâ”‚
   â”‚  â”‚                                                  â”‚    â”‚
   â”‚  â”‚  [View Details] buttons for each                â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â”‚                                                           â”‚
   â”‚  â€¢ Search by guest name                                  â”‚
   â”‚  â€¢ Sort by any column                                    â”‚
   â”‚  â€¢ Pagination (10 per page)                              â”‚
   â”‚  â€¢ Real-time updates                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

## ğŸ”„ Real-time Update Mechanism

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   EVENT-DRIVEN ARCHITECTURE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Guest Creates Reservation
         â”‚
         â–¼
   API Success Response
         â”‚
         â–¼
   Dispatch Custom Event
   "reservationCreated"
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                     â”‚
         â–¼                                     â–¼
   Host Dashboard                    Host Reservations Page
   (if open)                         (if open)
         â”‚                                     â”‚
         â–¼                                     â–¼
   Event Listener                    Event Listener
   Triggered                         Triggered
         â”‚                                     â”‚
         â–¼                                     â–¼
   fetchDashboardData()             fetchReservations()
         â”‚                                     â”‚
         â–¼                                     â–¼
   API Calls                         API Call
   â€¢ Stats                           â€¢ Reservations List
   â€¢ Reservations
   â€¢ Pending
         â”‚                                     â”‚
         â–¼                                     â–¼
   UI Updates                        UI Updates
   â€¢ Statistics                      â€¢ Table
   â€¢ Tables                          â€¢ Filters
   â€¢ Toast                           â€¢ Toast
```

## ğŸ’¾ Database Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE OPERATIONS                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CREATE RESERVATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Reservation Table   â”‚
   â”‚                      â”‚
   â”‚  INSERT INTO:        â”‚
   â”‚  â€¢ id (UUID)         â”‚
   â”‚  â€¢ property_id       â”‚
   â”‚  â€¢ guest_id          â”‚
   â”‚  â€¢ host_id           â”‚
   â”‚  â€¢ check_in_date     â”‚
   â”‚  â€¢ check_out_date    â”‚
   â”‚  â€¢ guests_count      â”‚
   â”‚  â€¢ total_price       â”‚
   â”‚  â€¢ booking_fee       â”‚
   â”‚  â€¢ host_earnings     â”‚
   â”‚  â€¢ status: 'pending' â”‚
   â”‚  â€¢ created_at        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. APPROVE RESERVATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Reservation Table   â”‚     â”‚  HostEarnings Table  â”‚
   â”‚                      â”‚     â”‚                      â”‚
   â”‚  UPDATE:             â”‚     â”‚  INSERT INTO:        â”‚
   â”‚  â€¢ status = 'approved'â”‚    â”‚  â€¢ id (UUID)         â”‚
   â”‚                      â”‚     â”‚  â€¢ host_id           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â€¢ reservation_id    â”‚
                                â”‚  â€¢ gross_earnings    â”‚
                                â”‚  â€¢ platform_fee      â”‚
                                â”‚  â€¢ net_earnings      â”‚
                                â”‚  â€¢ payout_status     â”‚
                                â”‚  â€¢ created_at        â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. QUERY RESERVATIONS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  SELECT * FROM booking_reservation               â”‚
   â”‚  WHERE host_id = current_user_id                 â”‚
   â”‚  AND status = 'pending'  (optional filter)       â”‚
   â”‚  ORDER BY created_at DESC                        â”‚
   â”‚  LIMIT 10 OFFSET 0  (pagination)                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLERK AUTHENTICATION                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend Request
      â”‚
      â–¼
Get Clerk JWT Token
const token = await getToken();
      â”‚
      â–¼
Add to Request Headers
Authorization: Bearer <token>
      â”‚
      â–¼
Backend Receives Request
      â”‚
      â–¼
ClerkAuthentication Middleware
â€¢ Validates JWT signature
â€¢ Extracts user ID
â€¢ Loads user from database
      â”‚
      â”œâ”€â”€â”€ Valid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                          â”‚
      â–¼                          â–¼
Process Request          Attach user to request
      â”‚                   request.user = user
      â–¼                          â”‚
Return Response                  â–¼
                         Check Permissions
                         â€¢ Is user the host?
                         â€¢ Is user authenticated?
                                 â”‚
                                 â–¼
                         Execute View Logic
```

## ğŸ“Š Data Flow Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Guest  â”‚â”€â”€â”€â–¶â”‚ Frontendâ”‚â”€â”€â”€â–¶â”‚  Backend â”‚â”€â”€â”€â–¶â”‚ Database â”‚
â”‚ Action â”‚    â”‚ (React) â”‚    â”‚ (Django) â”‚    â”‚ (SQLite) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚               â”‚                â”‚
                   â”‚               â”‚                â”‚
                   â–¼               â–¼                â–¼
            Event Dispatch   Create Records   Store Data
                   â”‚               â”‚                â”‚
                   â”‚               â”‚                â”‚
                   â–¼               â–¼                â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Host   â”‚â—€â”€â”€â”€â”‚ Response â”‚â—€â”€â”€â”€â”‚  Query   â”‚
            â”‚Dashboardâ”‚    â”‚   Data   â”‚    â”‚  Result  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… System Status

- âœ… Guest can create reservations
- âœ… Host receives real-time notifications
- âœ… Dashboard updates automatically
- âœ… Approve/Decline functionality works
- âœ… Earnings calculated and tracked
- âœ… Status management complete
- âœ… Authentication integrated
- âœ… Error handling implemented
- âœ… Toast notifications working
- âœ… Event-driven updates functional

**System is 100% operational and production-ready!**

